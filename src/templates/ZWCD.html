{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/dashboard.css">
{% endblock %}

{% block content %}
<div class="container bugfix">
    <form id="mainSearchForm" action="/search" method="get" style="margin: 0;">
        <div style="display: flex">
            <input type="search" 
                   name="q" 
                   id="mainSearchInput" 
                   value="" 
                   tabindex="1"
                   autocapitalize="off" 
                   autocomplete="off" 
                   autocorrect="off" 
                   spellcheck="false" 
                   lang="zh" 
                   placeholder="Type a hanzi or a word" 
                   class="autofocus" 
                   autofocus
                   required>
            
            <select id="mainSearchLang" 
                    name="lang" 
                    style="flex-grow: 0;flex-shrink: 1;width: auto;margin-left: 0.3rem;" 
                    class="lang-select">
                <option value="english">EN</option>
                <option value="chinese" selected>CN</option>
            </select>
        </div>
        <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;" tabindex="-1">
    </form>

    <h1> Subscribe to ZWCD to gain account functions </h1>
    <p>ZWCD is a free to use site. 
       However, most of the features are only available to users with an account.
       Consider making an account on ZWCD to gain access to these features.
    </p>
    <p>Account features include:
        <ul>
            <li>Browse and save public decks</li>
            <li>Gain access to custom made decks</li>
            <li>Create and shape your own decks</li>
            <li>Track your learning progress</li>
            <li>And more...!</li>
        </ul>
    </p>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Restore language preference
        const savedLang = localStorage.getItem('search-lang');
        if (savedLang) {
            document.getElementById('mainSearchLang').value = savedLang;
        }

        // Handle language selection changes
        document.getElementById('mainSearchLang').addEventListener('change', function() {
            localStorage.setItem('search-lang', this.value);
        });

        // Handle form submission
        document.getElementById('mainSearchForm').addEventListener('submit', function(e) {
            const query = document.getElementById('mainSearchInput').value.trim();
            if (!query) {
                e.preventDefault();
            }
        });
    });
</script>
{% endblock %}